<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Getting Started | Terra3</title>
    <meta name="description" content="Documentation for Terra3.">
    <link rel="stylesheet" href="/assets/style.443fd9fb.css">
    <link rel="modulepreload" href="/assets/app.f673af1e.js">
    <link rel="modulepreload" href="/assets/getting-started.md.a7c05c41.lean.js">
    
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance"),a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c6a644e1><!--[--><!--]--><!--[--><span tabindex="-1" data-v-151f2593></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-151f2593> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c6a644e1 data-v-a71a30f1><div class="VPNavBar has-sidebar" data-v-a71a30f1 data-v-6f1d18b5><div class="container" data-v-6f1d18b5><div class="VPNavBarTitle has-sidebar" data-v-6f1d18b5 data-v-d5925166><a class="title" href="/" data-v-d5925166><!--[--><!--]--><!----><!--[-->Terra3<!--]--><!--[--><!--]--></a></div><div class="content" data-v-6f1d18b5><!--[--><!--]--><!----><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6f1d18b5 data-v-f83db6ba><span id="main-nav-aria-label" class="visually-hidden" data-v-f83db6ba>Main Navigation</span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="https://www.it-objects.de/cloud/" target="_blank" rel="noreferrer" data-v-f83db6ba data-v-47a2263e data-v-3c355974><!--[-->-&gt;IT-Objects<!--]--><!----></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6f1d18b5 data-v-a3e7452b><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-a3e7452b data-v-51c451fd data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-51c451fd><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-51c451fd><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6f1d18b5 data-v-738bef5a data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/it-objects/terraform-aws-terra3" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6f1d18b5 data-v-e4361c82 data-v-6ffb57d3><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-6ffb57d3><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-6ffb57d3><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-6ffb57d3><div class="VPMenu" data-v-6ffb57d3 data-v-1c5d0cfc><!----><!--[--><!--[--><!----><div class="group" data-v-e4361c82><div class="item appearance" data-v-e4361c82><p class="label" data-v-e4361c82>Appearance</p><div class="appearance-action" data-v-e4361c82><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" aria-label="toggle dark mode" aria-checked="false" data-v-e4361c82 data-v-51c451fd data-v-eba7420e><span class="check" data-v-eba7420e><span class="icon" data-v-eba7420e><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-51c451fd><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-51c451fd><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-e4361c82><div class="item social-links" data-v-e4361c82><div class="VPSocialLinks social-links-list" data-v-e4361c82 data-v-f6988cfb><!--[--><a class="VPSocialLink" href="https://github.com/it-objects/terraform-aws-terra3" target="_blank" rel="noopener" data-v-f6988cfb data-v-e57698f6><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6f1d18b5 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div><!----></header><div class="VPLocalNav" data-v-c6a644e1 data-v-aac27d5e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-aac27d5e><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-aac27d5e><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-aac27d5e>Menu</span></button><a class="top-link" href="#" data-v-aac27d5e> Return to top </a></div><aside class="VPSidebar" data-v-c6a644e1 data-v-0f582cdc><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-0f582cdc><span class="visually-hidden" id="sidebar-aria-label" data-v-0f582cdc> Sidebar Navigation </span><!--[--><div class="group" data-v-0f582cdc><section class="VPSidebarGroup" data-v-0f582cdc data-v-35f99ef5><div class="title" data-v-35f99ef5><h2 class="title-text" data-v-35f99ef5>Guide</h2><div class="action" data-v-35f99ef5><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewbox="0 0 24 24" class="icon minus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2zM20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h8c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg><svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon plus" data-v-35f99ef5><path d="M19,2H5C3.3,2,2,3.3,2,5v14c0,1.7,1.3,3,3,3h14c1.7,0,3-1.3,3-3V5C22,3.3,20.7,2,19,2z M20,19c0,0.6-0.4,1-1,1H5c-0.6,0-1-0.4-1-1V5c0-0.6,0.4-1,1-1h14c0.6,0,1,0.4,1,1V19z"></path><path d="M16,11h-3V8c0-0.6-0.4-1-1-1s-1,0.4-1,1v3H8c-0.6,0-1,0.4-1,1s0.4,1,1,1h3v3c0,0.6,0.4,1,1,1s1-0.4,1-1v-3h3c0.6,0,1-0.4,1-1S16.6,11,16,11z"></path></svg></div></div><div class="items" data-v-35f99ef5><!--[--><!--[--><a class="VPLink link link" href="/overview.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Overview</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link active" href="/getting-started.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Getting Started</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/contributing.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>Contributing</span><!--]--><!----></a><!----><!--]--><!--[--><a class="VPLink link link" href="/about.html" style="padding-left:0px;" data-v-2cfe069a data-v-3c355974><!--[--><span class="link-text" data-v-2cfe069a>About</span><!--]--><!----></a><!----><!--]--><!--]--></div></section></div><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-c6a644e1 data-v-c95df128><div class="VPDoc has-sidebar has-aside" data-v-c95df128 data-v-37ebe389><div class="container" data-v-37ebe389><div class="aside" data-v-37ebe389><div class="aside-curtain" data-v-37ebe389></div><div class="aside-container" data-v-37ebe389><div class="aside-content" data-v-37ebe389><div class="VPDocAside" data-v-37ebe389 data-v-afc4c1a1><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-afc4c1a1 data-v-2865c0b0><div class="content" data-v-2865c0b0><div class="outline-marker" data-v-2865c0b0></div><div class="outline-title" data-v-2865c0b0>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-2865c0b0><span class="visually-hidden" id="doc-outline-aria-label" data-v-2865c0b0> Table of Contents for current page </span><ul class="root" data-v-2865c0b0 data-v-1188541a><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-afc4c1a1></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-37ebe389><div class="content-container" data-v-37ebe389><!--[--><!--]--><main class="main" data-v-37ebe389><div style="position:relative;" class="vp-doc _getting-started" data-v-37ebe389><div><h1 id="getting-started" tabindex="-1">Getting Started <a class="header-anchor" href="#getting-started" aria-hidden="true">#</a></h1><p>This getting started guide will help you deploy your first environment using Terra3. This guide is split across three steps:</p><ol><li><p>Deploying a static website served from an S3 bucket and AWS Cloudfront</p></li><li><p>Deploying all from step 1 + an nginx demo container on AWS ECS</p></li><li><p>Deploying all from step 1 &amp; 2 + providing your own domain name and enabling TLS between Cloudfront and the Application Loadbalancer</p></li></ol><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-hidden="true">#</a></h2><p>First, ensure that you have installed the following tools locally.</p><ol><li><p><a href="https://docs.aws.amazon.com/cli/latest/userguide/install-cliv2.html" target="_blank" rel="noreferrer">aws cli</a></p></li><li><p><a href="https://learn.hashicorp.com/tutorials/terraform/install-cli" target="_blank" rel="noreferrer">terraform</a></p></li></ol><h3 id="clone-the-repo" tabindex="-1">Clone the repo <a class="header-anchor" href="#clone-the-repo" aria-hidden="true">#</a></h3><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">git clone https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;">//github.com/it-objects/terraform-aws-terra3.git</span></span>
<span class="line"></span></code></pre></div><h2 id="deployment-steps-for-example-1" tabindex="-1">Deployment Steps for Example 1 <a class="header-anchor" href="#deployment-steps-for-example-1" aria-hidden="true">#</a></h2><p>Example 1 will provision a subset of the overall 3-tier architecture, namely</p><ul><li>the static website served from an S3 bucket and AWS Cloudfront</li></ul><p>as depicted in this diagram:</p><p><img src="/assets/61734921.7d3186cc.png" alt=""></p><h3 id="terraform-init" tabindex="-1">Terraform INIT <a class="header-anchor" href="#terraform-init" aria-hidden="true">#</a></h3><p>CD into the examples directory:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">cd terraform</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">aws</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">terra3</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">examples</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">example_1</span></span>
<span class="line"></span></code></pre></div><p>Initialize the working directory with the following:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform init</span></span>
<span class="line"></span></code></pre></div><h3 id="terraform-plan" tabindex="-1">Terraform PLAN <a class="header-anchor" href="#terraform-plan" aria-hidden="true">#</a></h3><p>Verify the resources that will be created by this execution:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform plan</span></span>
<span class="line"></span></code></pre></div><h3 id="terraform-apply" tabindex="-1">Terraform APPLY <a class="header-anchor" href="#terraform-apply" aria-hidden="true">#</a></h3><p>Let’s provision this example.</p><p>Note: make sure that the AWS CLI is correctly configured and that you’re deploying to the right AWS account.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform apply</span></span>
<span class="line"></span></code></pre></div><h2 id="validation" tabindex="-1">Validation <a class="header-anchor" href="#validation" aria-hidden="true">#</a></h2><p>After about 30-60 seconds, the script has been applied and a Cloudfront URL is shown similar to this one:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">cloudfront_default_domain_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dcot74k2131h8.cloudfront.net</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Use it in your browser to test the static website deployed to S3 and served via Cloudfront.</p><p>Please note: it requires another 30 seconds, until the Cloudfront distribution is ready and the website is presented correctly.</p><p>It could look something like this when you use the command line tool “curl” to query the URL:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">❯ curl https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;">//dcot74k2131h8.cloudfront.net  </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C792EA;">Hello</span><span style="color:#A6ACCD;"> world</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Terra3</span><span style="color:#89DDFF;">!&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;%</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"></span></code></pre></div><p>Go to the S3 section in your AWS web console and find the S3 bucket with the index.html file. Feel free, to edit the file and see the change being reflected when reloading the page in your browser.</p><h2 id="finalization" tabindex="-1">Finalization <a class="header-anchor" href="#finalization" aria-hidden="true">#</a></h2><p>To clean up your AWS account, issue the following command which will remove all previously provisioned AWS resources.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform destroy</span></span>
<span class="line"></span></code></pre></div><h2 id="deployment-steps-for-example-2" tabindex="-1">Deployment Steps for Example 2 <a class="header-anchor" href="#deployment-steps-for-example-2" aria-hidden="true">#</a></h2><p>Example 2 will provision a more advanced subset of the overall 3-tier architecture, namely</p><ul><li><p>the static website served from an S3 bucket and AWS Cloudfront and</p></li><li><p>an ECS task with two containers</p></li></ul><p>as depicted in this diagram:</p><p><img src="/assets/62816257.97cebe6e.png" alt=""></p><h3 id="terraform-init-1" tabindex="-1">Terraform INIT <a class="header-anchor" href="#terraform-init-1" aria-hidden="true">#</a></h3><p>CD into the examples directory:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">cd terraform</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">aws</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">terra3</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">examples</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">example_2</span></span>
<span class="line"></span></code></pre></div><p>Initialize the working directory with the following:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform init</span></span>
<span class="line"></span></code></pre></div><h3 id="terraform-plan-1" tabindex="-1">Terraform PLAN <a class="header-anchor" href="#terraform-plan-1" aria-hidden="true">#</a></h3><p>Verify the resources that will be created by this execution:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform plan</span></span>
<span class="line"></span></code></pre></div><h3 id="terraform-apply-1" tabindex="-1">Terraform APPLY <a class="header-anchor" href="#terraform-apply-1" aria-hidden="true">#</a></h3><p>Let’s provision the first example.</p><p>Note: make sure that the AWS CLI is correctly configured and that you’re deploying to the right AWS account.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform apply</span></span>
<span class="line"></span></code></pre></div><h2 id="validation-1" tabindex="-1">Validation <a class="header-anchor" href="#validation-1" aria-hidden="true">#</a></h2><p>After about 4 minutes, the script has been applied and a Cloudfront URL is shown similar to this one:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">cloudfront_default_domain_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dcot74k2131h8.cloudfront.net</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Use it in your browser to test the static website deployed to S3 and served via Cloudfront. Append “/api/” to the end of the URL to check that traffic is routed correctly to your nginxdemos/hello container via the application load balancer.</p><p>Please note: it requires another 30 seconds, until the Cloudfront distribution and the containers are ready and the website is presented correctly.</p><p>It could look something like this when you use the command line tool “curl” to query the URL:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">❯ curl https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;">//dcot74k2131h8.cloudfront.net  </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C792EA;">Hello</span><span style="color:#A6ACCD;"> world</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Terra3</span><span style="color:#89DDFF;">!&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;%</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">❯ curl https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;">//dcot74k2131h8.cloudfront.net/api/  </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;!</span><span style="color:#C792EA;">DOCTYPE</span><span style="color:#A6ACCD;"> html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">html</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">head</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">title</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C792EA;">Hello</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">World</span><span style="color:#89DDFF;">&lt;/</span><span style="color:#A6ACCD;">title</span><span style="color:#89DDFF;">&gt;</span></span>
<span class="line"><span style="color:#89DDFF;">...</span></span>
<span class="line"></span></code></pre></div><p>Go to the ECS section in your AWS web console and find the ECS cluster. You should be able to see the task with two containers you just have deployed. The</p><h2 id="finalization-1" tabindex="-1">Finalization <a class="header-anchor" href="#finalization-1" aria-hidden="true">#</a></h2><p>To clean up your AWS account, issue the following command which will remove all previously provisioned AWS resources.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform destroy</span></span>
<span class="line"></span></code></pre></div><h2 id="deployment-steps-for-example-3" tabindex="-1">Deployment Steps for Example 3 <a class="header-anchor" href="#deployment-steps-for-example-3" aria-hidden="true">#</a></h2><p>Example 3 will provision an even more advanced subset of the overall 3-tier architecture, namely</p><ul><li><p>the static website served from an S3 bucket and AWS Cloudfront and</p></li><li><p>an ECS task with two containers and</p></li><li><p>your own domain + certificates</p></li></ul><p>as depicted in this diagram:</p><p><img src="/assets/61997065.0f96e0d0.png" alt=""></p><p>A subdomain will be created named after the name of your solution (solution_name parameter). Also a second subdomain will be created for your loadbalancer so that we also achieve a transport encryption with TLS between Cloudfront and the Application Loadbalancer.</p><p><strong>Please note: there’s a prerequisite to this example. A Route53 Hosted Zone needs to be provisioned into your account already, with a domain attached to it. The ID of the hosted zone is required as input parameter, so that the Terraform script can be executed.</strong></p><h3 id="terraform-init-2" tabindex="-1">Terraform INIT <a class="header-anchor" href="#terraform-init-2" aria-hidden="true">#</a></h3><p>CD into the examples directory:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">cd terraform</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">aws</span><span style="color:#89DDFF;">-</span><span style="color:#A6ACCD;">terra3</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">examples</span><span style="color:#89DDFF;">/</span><span style="color:#A6ACCD;">example_3</span></span>
<span class="line"></span></code></pre></div><p>Initialize the working directory with the following:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform init</span></span>
<span class="line"></span></code></pre></div><h3 id="update-route53-hosted-zone-id" tabindex="-1">Update Route53 Hosted Zone Id <a class="header-anchor" href="#update-route53-hosted-zone-id" aria-hidden="true">#</a></h3><p>As mentioned in the prerequisite to this example, please open the <a href="http://main.tf" target="_blank" rel="noreferrer">main.tf</a> file and enter the Route53 hosted zone ID.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">locals </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">  route53_zone_id </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">&lt;PLEASE ENTER HERE THE HOSTED ZONE ID&gt;</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"><span style="color:#A6ACCD;">  solution_name   </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">terra3-example3</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre></div><h3 id="terraform-plan-2" tabindex="-1">Terraform PLAN <a class="header-anchor" href="#terraform-plan-2" aria-hidden="true">#</a></h3><p>Verify the resources that will be created by this execution:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform plan</span></span>
<span class="line"></span></code></pre></div><h3 id="terraform-apply-2" tabindex="-1">Terraform APPLY <a class="header-anchor" href="#terraform-apply-2" aria-hidden="true">#</a></h3><p>Let’s provision the first example.</p><p>Note: make sure that the AWS CLI is correctly configured and that you’re deploying to the right AWS account.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform apply</span></span>
<span class="line"></span></code></pre></div><h2 id="validation-2" tabindex="-1">Validation <a class="header-anchor" href="#validation-2" aria-hidden="true">#</a></h2><p>After about 30-60 seconds, the script has been applied and a Cloudfront URL is shown similar to this one:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">cloudfront_default_domain_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">dcot74k2131h8.cloudfront.net</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span></code></pre></div><p>Use it in your browser to test the static website deployed to S3 and served via Cloudfront.</p><p>Please note: it requires another 30 seconds, until the Cloudfront distribution is ready and the website is presented correctly.</p><p>It could look something like this when you use the command line tool “curl” to query the URL:</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">❯ curl https</span><span style="color:#89DDFF;">:</span><span style="color:#676E95;">//dcot74k2131h8.cloudfront.net  </span></span>
<span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;</span><span style="color:#C792EA;">Hello</span><span style="color:#A6ACCD;"> world</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Terra3</span><span style="color:#89DDFF;">!&lt;/</span><span style="color:#A6ACCD;">h1</span><span style="color:#89DDFF;">&gt;%</span><span style="color:#A6ACCD;">  </span></span>
<span class="line"></span></code></pre></div><p>Go to the S3 section in your AWS web console and find the S3 bucket with the index.html file. Feel free, to edit the file and see the change being reflected when reloading the page in your browser.</p><h2 id="finalization-2" tabindex="-1">Finalization <a class="header-anchor" href="#finalization-2" aria-hidden="true">#</a></h2><p>To clean up your AWS account, issue the following command which will remove all previously provisioned AWS resources.</p><div class="language-java"><button title="Copy Code" class="copy"></button><span class="lang">java</span><pre><code><span class="line"><span style="color:#A6ACCD;">terraform destroy</span></span>
<span class="line"></span></code></pre></div></div></div></main><!--[--><!--]--><footer class="VPDocFooter" data-v-37ebe389 data-v-a54a85bd><div class="edit-info" data-v-a54a85bd><div class="edit-link" data-v-a54a85bd><a class="VPLink link edit-link-button" href="https://github.com/it-objects/terraform-aws-terra3/edit/main/gh-pages/docs/getting-started.md" target="_blank" rel="noreferrer" data-v-a54a85bd data-v-3c355974><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" data-v-a54a85bd><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--><!----></a></div><div class="last-updated" data-v-a54a85bd><p class="VPLastUpdated" data-v-a54a85bd data-v-f7d51a9c>Last updated: <time datatime="2022-10-19T20:13:45.000Z" data-v-f7d51a9c></time></p></div></div><div class="prev-next" data-v-a54a85bd><div class="pager" data-v-a54a85bd><a class="pager-link prev" href="/overview.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Previous page</span><span class="title" data-v-a54a85bd>Overview</span></a></div><div class="has-prev pager" data-v-a54a85bd><a class="pager-link next" href="/contributing.html" data-v-a54a85bd><span class="desc" data-v-a54a85bd>Next page</span><span class="title" data-v-a54a85bd>Contributing</span></a></div></div></footer><!--[--><!--]--></div></div></div></div></div><footer class="VPFooter has-sidebar" data-v-c6a644e1 data-v-9f24cc86><div class="container" data-v-9f24cc86><p class="message" data-v-9f24cc86>Released under the Apache2 License.</p><p class="copyright" data-v-9f24cc86>Copyright © 2022 it-objects GmbH</p></div></footer><!--[--><!--]--></div></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"about.md\":\"18fdb0e2\",\"contributing.md\":\"925d123b\",\"core-concepts.md\":\"1d1ccb6c\",\"future.md\":\"4a2e8e38\",\"getting-started.md\":\"a7c05c41\",\"index.md\":\"8785d527\",\"overview.md\":\"ef40f479\"}")</script>
    <script type="module" async src="/assets/app.f673af1e.js"></script>
    
  </body>
</html>